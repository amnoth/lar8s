kind: ConfigMap
apiVersion: v1
metadata:
  name: supervisord.config
  labels:
    name: supervisord.config
data:
  supervisord.conf: |
    [supervisord]
    nodaemon=true
    [supervisorctl]
    [inet_http_server]
    port = 127.0.0.1:9001
    [rpcinterface:supervisor]
    supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

    [include]
    files = supervisord.d/*.conf

    [program:laravel-horizon]
    process_name=%(program_name)s_%(process_num)02d
    command=php /var/www/artisan horizon
    autostart=true
    autorestart=true
    numprocs=1
    redirect_stderr=true